'use strict';

//PROD

const sign_up_message = async(event, context) => {
    let email = event.request.usernameParameter;
    let code = event.request.codeParameter;
    event.response = {
        emailSubject: "Confirm your account",
        emailMessage: `<!DOCTYPE html><html> <head> <title></title> <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> <meta content="width=device-width, initial-scale=1.0" name="viewport"/><!--[if mso]><xml ><o:OfficeDocumentSettings ><o:PixelsPerInch>96</o:PixelsPerInch ><o:AllowPNG/></o:OfficeDocumentSettings></xml ><![endif]--> <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css"/> <link href="https://fonts.googleapis.com/css?family=Cabin" rel="stylesheet" type="text/css"/> <style>*{box-sizing: border-box;}body{margin: 0; padding: 0;}a[x-apple-data-detectors]{color: inherit !important; text-decoration: inherit !important;}#MessageViewBody a{color: inherit; text-decoration: none;}p{line-height: inherit;}.desktop_hide, .desktop_hide table{mso-hide: all; display: none; max-height: 0px; overflow: hidden;}@media (max-width: 620px){.desktop_hide table.icons-inner, .social_block.desktop_hide .social-table{display: inline-block !important;}.icons-inner{text-align: center;}.icons-inner td{margin: 0 auto;}.row-content{width: 100% !important;}.mobile_hide{display: none;}.stack .column{width: 100%; display: block;}.mobile_hide{min-height: 0; max-height: 0; max-width: 0; overflow: hidden; font-size: 0px;}.desktop_hide, .desktop_hide table{display: table !important; max-height: none !important;}}</style> </head> <body style=" background-color: #f4ddb8; margin: 0; padding: 0; -webkit-text-size-adjust: none; text-size-adjust: none; " > <table border="0" cellpadding="0" cellspacing="0" class="nl-container" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; background-size: auto; background-image: none; background-position: top left; background-repeat: no-repeat; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; vertical-align: top; padding-top: 20px; padding-bottom: 0px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="0" cellspacing="0" class="empty_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad"> <div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #F4DDB8; background-size: auto; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-size: auto; background-color: #ffffff; color: #000000; border-radius: 20px; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 50px; padding-right: 50px; vertical-align: top; padding-top: 15px; padding-bottom: 15px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="10" cellspacing="0" class="text_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #CC5803; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <strong ><span style="font-size: 38px" >Verify your email address</span ></strong > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >We need to verify your email to confirm your account</span > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-3" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >Your verification code is ${code}</span > </p></div></div></td></tr></table> <table border="0" cellpadding="0" cellspacing="0" class="button_block block-4" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad" style=" padding-bottom: 20px; padding-left: 10px; padding-right: 10px; padding-top: 20px; text-align: left; " > <div align="center" class="alignment"><!--[if mso]><v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="http://stellarmenus.com/" style="height:46px;width:212px;v-text-anchor:middle;" arcsize="35%" stroke="false" fillcolor="#CC5803"><w:anchorlock/><v:textbox inset="5px,0px,0px,0px"><center style="color:#ffffff; font-family:Arial, sans-serif; font-size:15px"><! [endif]--><a href="https://auth.stellarmenus.com/auth/confirm-account" style=" text-decoration: none; display: inline-block; color: #ffffff; background-color: #CC5803; border-radius: 16px; width: auto; border-top: 0px solid TRANSPARENT; font-weight: undefined; border-right: 0px solid TRANSPARENT; border-bottom: 0px solid TRANSPARENT; border-left: 0px solid TRANSPARENT; padding-top: 8px; padding-bottom: 8px; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-size: 15px; text-align: center; mso-border-alt: none; word-break: keep-all; " target="_blank" ><span style=" padding-left: 25px; padding-right: 20px; font-size: 15px; display: inline-block; letter-spacing: normal; " ><span style="word-break: break-word" ><span data-mce-style="" style="line-height: 30px" ><strong >CONFIRM ACCOUNT</strong ></span ></span ></span ></a > </div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-5" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 14px" >If you have any questions, please contact <a href="mailto:support@stellarmenus.com/" rel="noopener" style=" text-decoration: none; color: #40507a; " target="_blank" title="support@stellarmenus.com" ><strong>support@stellarmenus.com</strong></a > or reach out to us via our help center at <a href="https://help.stellarmenus.com">https://help.stellarmenus.com</a>.</span > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-6" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > Didn't request a code? You can ignore this message. </p></div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-3" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt; ;" width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 10px; padding-right: 10px; vertical-align: top; padding-top: 10px; padding-bottom: 20px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="10" cellspacing="0" class="image_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad"> <div align="center" class="alignment" style="line-height: 10px;" > <a href="http://stellarmenus.com/" style="outline: none" tabindex="-1" target="_blank" ><img alt="Your Logo" src="https://stellarmenus.com/wp-content/uploads/2022/04/stellar-menus-for-white-bg.png" style=" display: block; height: auto; border: 0; width: 145px; max-width: 100%; " title="Your Logo" width="145"/></a> </div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="social_block block-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > </table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-3" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > +1 (617) 882-2800 </p><p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > Stellar Menus Inc, 404 Commercial Street, Provincetown MA 02657 </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-4" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > This code will expire in the next 24 hours.<br/>Please feel free to contact us at <a href="mailto:support@stellarmenus.com">support@stellarmenus.com</a>. </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-5" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; text-align: center; font-size: 12px; mso-line-height-alt: 14.399999999999999px; " > <span style="font-size: 12px" > &#169; ${new Date().getFullYear()} Stellar Menus Inc. All Rights Reserved.</span > </p></div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table> </body></html>`
    }
    
    return event;
}
const admin_create_user_message = async(event) => {
    let email = event.request.usernameParameter;
    let code = event.request.codeParameter;
    event.response = {
        emailSubject: "Welcome to Stellar Menus",
        emailMessage: `<!DOCTYPE html><html> <head> <title></title> <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> <meta content="width=device-width, initial-scale=1.0" name="viewport"/><!--[if mso]><xml ><o:OfficeDocumentSettings ><o:PixelsPerInch>96</o:PixelsPerInch ><o:AllowPNG/></o:OfficeDocumentSettings></xml ><![endif]--> <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css"/> <link href="https://fonts.googleapis.com/css?family=Cabin" rel="stylesheet" type="text/css"/> <style>*{box-sizing: border-box;}body{margin: 0; padding: 0;}a[x-apple-data-detectors]{color: inherit !important; text-decoration: inherit !important;}#MessageViewBody a{color: inherit; text-decoration: none;}p{line-height: inherit;}.desktop_hide, .desktop_hide table{mso-hide: all; display: none; max-height: 0px; overflow: hidden;}@media (max-width: 620px){.desktop_hide table.icons-inner, .social_block.desktop_hide .social-table{display: inline-block !important;}.icons-inner{text-align: center;}.icons-inner td{margin: 0 auto;}.row-content{width: 100% !important;}.mobile_hide{display: none;}.stack .column{width: 100%; display: block;}.mobile_hide{min-height: 0; max-height: 0; max-width: 0; overflow: hidden; font-size: 0px;}.desktop_hide, .desktop_hide table{display: table !important; max-height: none !important;}}</style> </head> <body style=" background-color: #f4ddb8; margin: 0; padding: 0; -webkit-text-size-adjust: none; text-size-adjust: none; " > <table border="0" cellpadding="0" cellspacing="0" class="nl-container" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; background-size: auto; background-image: none; background-position: top left; background-repeat: no-repeat; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; vertical-align: top; padding-top: 20px; padding-bottom: 0px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="0" cellspacing="0" class="empty_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad"> <div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; background-size: auto; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-size: auto; background-color: #ffffff; color: #000000; border-radius: 20px; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 50px; padding-right: 50px; vertical-align: top; padding-top: 15px; padding-bottom: 15px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="10" cellspacing="0" class="text_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #CC5803; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <strong ><span style="font-size: 38px" >Welcome</span ></strong > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >You have been invited to join Stellar Menus.</span > </p><p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " ></p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-3" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >Please visit <a href="https://app.stellarmenus.com" >https://app.stellarmenus.com</a > to accept the invite and set your password. </span> </p></div></div></td></tr><tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >Your user name is: ${email}</span> </p></div></div></td></tr><tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >Your temporary password is: ${code}</span> </p></div></div></td></tr></table> <table border="0" cellpadding="0" cellspacing="0" class="button_block block-4" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad" style=" padding-bottom: 20px; padding-left: 10px; padding-right: 10px; padding-top: 20px; text-align: left; " > <div align="center" class="alignment"><!--[if mso]><v:roundrect xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="http://stellarmenus.com/" style="height:46px;width:212px;v-text-anchor:middle;" arcsize="35%" stroke="false" fillcolor="#CC5803"><w:anchorlock/><v:textbox inset="5px,0px,0px,0px"><center style="color:#ffffff; font-family:Arial, sans-serif; font-size:15px"><! [endif]--><a href="https://app.stellarmenus.com" style=" text-decoration: none; display: inline-block; color: #ffffff; background-color: #cc5803; border-radius: 16px; width: auto; border-top: 0px solid TRANSPARENT; font-weight: undefined; border-right: 0px solid TRANSPARENT; border-bottom: 0px solid TRANSPARENT; border-left: 0px solid TRANSPARENT; padding-top: 8px; padding-bottom: 8px; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; font-size: 15px; text-align: center; mso-border-alt: none; word-break: keep-all; " target="_blank" ><span style=" padding-left: 25px; padding-right: 20px; font-size: 15px; display: inline-block; letter-spacing: normal; " ><span style="word-break: break-word" ><span data-mce-style="" style="line-height: 30px" ><strong >ACCEPT INVITE</strong ></span ></span ></span ></a > </div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-5" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 14px" >If you have any questions, please contact <a href="mailto:support@stellarmenus.com" rel="noopener" style=" text-decoration: none; color: #40507a; " target="_blank" title="support@stellarmenus.com" ><strong >support@stellarmenus.com</strong ></a > or reach out to us via our help center at <a href="https://help.stellarmenus.com" >https://help.stellarmenus.com</a >.</span > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-6" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" ></table> </td></tr></tbody> </table> </td></tr></tbody> </table> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-3" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt" width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 10px; padding-right: 10px; vertical-align: top; padding-top: 10px; padding-bottom: 20px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="10" cellspacing="0" class="image_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad"> <div align="center" class="alignment" style="line-height: 10px" > <a href="http://stellarmenus.com/" style="outline: none" tabindex="-1" target="_blank" ><img alt="Stellar Menus" src="https://stellarmenus.com/wp-content/uploads/2022/04/stellar-menus-for-white-bg.png" style=" display: block; height: auto; border: 0; width: 145px; max-width: 100%; " title="Stellar Menus" width="145"/></a> </div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="social_block block-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > </table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-3" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > +1 (617) 882-2800 </p><p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > Stellar Menus Inc, 404 Commercial Street, Provincetown MA 02657 </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-4" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > This link will expire in the next 24 hours.<br/>Please feel free to contact us at <a href="mailto:support@stellarmenus.com">support@stellarmenus.com</a> </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-5" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; text-align: center; font-size: 12px; mso-line-height-alt: 14.399999999999999px; " > <span style="font-size: 12px" >&#169; ${new Date().getFullYear()} Stellar Menus Inc. All Rights Reserved.</span > </p></div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table> </body></html>`
    }
    return event
}
const resend_code_message = async(event, context) => {
    let email = event.request.usernameParameter;
    let code = event.request.codeParameter;
    event.response = {
        emailSubject: "Resend code",
        emailMessage: `<!DOCTYPE html><html> <head> <title></title> <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> <meta content="width=device-width, initial-scale=1.0" name="viewport"/><!--[if mso]><xml ><o:OfficeDocumentSettings ><o:PixelsPerInch>96</o:PixelsPerInch ><o:AllowPNG/></o:OfficeDocumentSettings></xml ><![endif]--> <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css"/> <link href="https://fonts.googleapis.com/css?family=Cabin" rel="stylesheet" type="text/css"/> <style>*{box-sizing: border-box;}body{margin: 0; padding: 0;}a[x-apple-data-detectors]{color: inherit !important; text-decoration: inherit !important;}#MessageViewBody a{color: inherit; text-decoration: none;}p{line-height: inherit;}.desktop_hide, .desktop_hide table{mso-hide: all; display: none; max-height: 0px; overflow: hidden;}@media (max-width: 620px){.desktop_hide table.icons-inner, .social_block.desktop_hide .social-table{display: inline-block !important;}.icons-inner{text-align: center;}.icons-inner td{margin: 0 auto;}.row-content{width: 100% !important;}.mobile_hide{display: none;}.stack .column{width: 100%; display: block;}.mobile_hide{min-height: 0; max-height: 0; max-width: 0; overflow: hidden; font-size: 0px;}.desktop_hide, .desktop_hide table{display: table !important; max-height: none !important;}}</style> </head> <body style=" background-color: #f4ddb8; margin: 0; padding: 0; -webkit-text-size-adjust: none; text-size-adjust: none; " > <table border="0" cellpadding="0" cellspacing="0" class="nl-container" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; background-size: auto; background-image: none; background-position: top left; background-repeat: no-repeat; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; vertical-align: top; padding-top: 20px; padding-bottom: 0px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="0" cellspacing="0" class="empty_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad"> <div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; background-size: auto; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-size: auto; background-color: #ffffff; color: #000000; border-radius: 20px; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 50px; padding-right: 50px; vertical-align: top; padding-top: 15px; padding-bottom: 15px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="10" cellspacing="0" class="text_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #cc5803; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <strong ><span style="font-size: 38px" >Didn't get a code?</span ></strong > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" ></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-3" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >Your verification code is ${code}</span > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-5" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 14px" >If you have any questions, please contact <a href="mailto:support@stellarmenus.com" rel="noopener" style=" text-decoration: none; color: #40507a; " target="_blank" title="support@stellarmenus.com" ><strong >support@stellarmenus.com</strong ></a > or reach out to us via our help center at <a href="https://help.stellarmenus.com" >https://help.stellarmenus.com</a >.</span > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-6" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > Didn't request a code? You can ignore this message. </p></div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-3" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt" width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 10px; padding-right: 10px; vertical-align: top; padding-top: 10px; padding-bottom: 20px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="10" cellspacing="0" class="image_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad"> <div align="center" class="alignment" style="line-height: 10px" > <a href="http://stellarmenus.com/" style="outline: none" tabindex="-1" target="_blank" ><img alt="Your Logo" src="https://stellarmenus.com/wp-content/uploads/2022/04/stellar-menus-for-white-bg.png" style=" display: block; height: auto; border: 0; width: 145px; max-width: 100%; " title="Your Logo" width="145"/></a> </div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="social_block block-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > </table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-3" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > +1 (617) 882-2800 </p><p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > Stellar Menus Inc, 404 Commercial Street, Provincetown MA 02657 </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-4" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > This code will expire in the next 24 hours.<br/>Please feel free to contact us at <a href="mailto:support@stellarmenus.com">support@stellarmenus.com</a> </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-5" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; text-align: center; font-size: 12px; mso-line-height-alt: 14.399999999999999px; " > <span style="font-size: 12px" >&#169; ${new Date().getFullYear()} Stellar Menus Inc. All Rights Reserved.</span > </p></div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table> </body></html>`
    }
    return event
}
const forgot_password = async(event, context) => {
    let email = event.request.usernameParameter;
    let code = event.request.codeParameter;
    event.response = {
        emailSubject: "Forgot your password",
        emailMessage: `<!DOCTYPE html><html> <head> <title></title> <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/> <meta content="width=device-width, initial-scale=1.0" name="viewport"/><!--[if mso]><xml ><o:OfficeDocumentSettings ><o:PixelsPerInch>96</o:PixelsPerInch ><o:AllowPNG/></o:OfficeDocumentSettings></xml ><![endif]--> <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css"/> <link href="https://fonts.googleapis.com/css?family=Cabin" rel="stylesheet" type="text/css"/> <style>*{box-sizing: border-box;}body{margin: 0; padding: 0;}a[x-apple-data-detectors]{color: inherit !important; text-decoration: inherit !important;}#MessageViewBody a{color: inherit; text-decoration: none;}p{line-height: inherit;}.desktop_hide, .desktop_hide table{mso-hide: all; display: none; max-height: 0px; overflow: hidden;}@media (max-width: 620px){.desktop_hide table.icons-inner, .social_block.desktop_hide .social-table{display: inline-block !important;}.icons-inner{text-align: center;}.icons-inner td{margin: 0 auto;}.row-content{width: 100% !important;}.mobile_hide{display: none;}.stack .column{width: 100%; display: block;}.mobile_hide{min-height: 0; max-height: 0; max-width: 0; overflow: hidden; font-size: 0px;}.desktop_hide, .desktop_hide table{display: table !important; max-height: none !important;}}</style> </head> <body style=" background-color: #f4ddb8; margin: 0; padding: 0; -webkit-text-size-adjust: none; text-size-adjust: none; " > <table border="0" cellpadding="0" cellspacing="0" class="nl-container" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; background-size: auto; background-image: none; background-position: top left; background-repeat: no-repeat; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f4ddb8; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; vertical-align: top; padding-top: 20px; padding-bottom: 0px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="0" cellspacing="0" class="empty_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad"> <div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #F4DDB8; background-size: auto; " width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-size: auto; background-color: #ffffff; color: #000000; border-radius: 20px; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 50px; padding-right: 50px; vertical-align: top; padding-top: 15px; padding-bottom: 15px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="10" cellspacing="0" class="text_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #CC5803; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <strong ><span style="font-size: 38px" >Forgot your password?</span ></strong > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >We received a request to reset your password.</span > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-3" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >Let’s get you a new one!</span > </p></div></div></td></tr><tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 16px" >Your verification code is ${code}</span > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-5" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > <span style="font-size: 14px" >If you have any questions, please contact <a href="mailto:support@stellarmenus.com" rel="noopener" style=" text-decoration: none; color: #40507a; " target="_blank" title="support@stellarmenus.com" ><strong>support@stellarmenus.com</strong></a > or reach out to us via our help center at <a href="https://help.stellarmenus.com">https://help.stellarmenus.com</a>.</span > </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-6" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td align="center" class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #40507a; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; mso-line-height-alt: 16.8px; " > Didn’t request a password reset? You can ignore this message. </p></div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row row-3" role="presentation" style="mso-table-lspace: 0pt; mso-table-rspace: 0pt;" width="100%" > <tbody> <tr> <td> <table align="center" border="0" cellpadding="0" cellspacing="0" class="row-content stack" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; color: #000000; width: 600px; " width="600" > <tbody> <tr> <td class="column column-1" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 10px; padding-right: 10px; vertical-align: top; padding-top: 10px; padding-bottom: 20px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px; " width="100%" > <table border="0" cellpadding="10" cellspacing="0" class="image_block block-1" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > <tr> <td class="pad"> <div align="center" class="alignment" style="line-height: 10px;" > <a href="http://stellarmenus.com/" style="outline: none" tabindex="-1" target="_blank" ><img alt="Your Logo" src="https://stellarmenus.com/wp-content/uploads/2022/04/stellar-menus-for-white-bg.png" style=" display: block; height: auto; border: 0; width: 145px; max-width: 100%; " title="Your Logo" width="145"/></a> </div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="social_block block-2" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; " width="100%" > </table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-3" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > +1 (617) 882-2800 </p><p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > Stellar Menus Inc, 404 Commercial Street, Provincetown MA 02657 </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-4" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; font-size: 14px; text-align: center; mso-line-height-alt: 16.8px; " > This code will expire in the next 24 hours.<br/>Please feel free to contact us at href="mailto:support@stellarmenus.com">support@stellarmenus.com</a> </p></div></div></td></tr></table> <table border="0" cellpadding="10" cellspacing="0" class="text_block block-5" role="presentation" style=" mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word; " width="100%" > <tr> <td class="pad"> <div style="font-family: sans-serif"> <div class="" style=" font-size: 14px; mso-line-height-alt: 16.8px; color: #000000; line-height: 1.2; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; " > <p style=" margin: 0; text-align: center; font-size: 12px; mso-line-height-alt: 14.399999999999999px; " > <span style="font-size: 12px" >&#169; ${new Date().getFullYear()} Stellar Menus Inc. All Rights Reserved.</span > </p></div></div></td></tr></table> </td></tr></tbody> </table> </td></tr></tbody> </table> </td></tr></tbody> </table> </body></html>`
    }
    return event
}

/*const update_user_attribute_message = async(event, context) => {
    let email = event.request.usernameParameter;
    let code = event.request.codeParameter;
    event.response = {
        emailSubject: "User updated",
        emailMessage: generate_email_body(`<p>Your username is <a style="text-decoration:none">${email}</a></p>`)
    }
    return event
}
const verify_user_attribute = async(event, context) => {
    let email = event.request.usernameParameter;
    let code = event.request.codeParameter;
    event.response = {
        emailSubject: "Verify user attribute",
        emailMessage: generate_email_body(`<p>Your username is ${email}</p>`)
    }
    return event
}
const authenitcation_message = async(event, context) => {
    let email = event.request.usernameParameter;
    let code = event.request.codeParameter;
    event.response = {
        emailSubject: "MFA Authenitcation",
        emailMessage: generate_email_body(`<p>Your username is ${email} and password is  ${code}  </p>`)
    }
    return event
}*/

exports.handler = async(event, context) => {
    console.log(event.triggerSource)
    switch (event.triggerSource) {
        case "CustomMessage_SignUp": //Sign-up trigger whenever a new user signs him/herself up.
            return sign_up_message(event, context)
        case "CustomMessage_AdminCreateUser": //When the user is created with adminCreateUser() API
            return admin_create_user_message(event, context)
        case "CustomMessage_ResendCode": //When user requests the code again.
            return resend_code_message(event, context)
        case "CustomMessage_ForgotPassword": //Forgot password request initiated by user
            return forgot_password(event, context)
        /*case "CustomMessage_UpdateUserAttribute": //Whenever the user attributes are updated
            return update_user_attribute_message(event, context)
        case "CustomMessage_VerifyUserAttribute": //Verify mobile number/email
            return verify_user_attribute(event, context)
        case "CustomMessage_Authentication": //MFA authenitcation code.
            return authenitcation_message(event, context)*/
        default:
            return event

    }
};